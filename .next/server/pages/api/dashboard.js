"use strict";(()=>{var e={};e.id=222,e.ids=[222],e.modules={4802:e=>{e.exports=require("cookie")},9344:e=>{e.exports=require("jsonwebtoken")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},8448:(e,t,n)=>{n.r(t),n.d(t,{config:()=>u,default:()=>l,routeModule:()=>f});var i={};n.r(i),n.d(i,{default:()=>d});var r=n(1802),o=n(7153),a=n(6249),s=n(1004),c=n(6044);function d(e,t){let n=(0,c.getTokenFromReq)(e);if(!n)return t.status(401).json({error:"Not authenticated. No token."});let i=(0,c.unsafeDecode)(n);if(!i||!i.email)return t.status(401).json({error:"Invalid token."});let{email:r,role:o}=i;return t.status(200).json({email:r,role:o,entities:(0,s.listEntities)()})}let l=(0,a.l)(i,"default"),u=(0,a.l)(i,"config"),f=new r.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/dashboard",pathname:"/api/dashboard",bundlePath:"",filename:""},userland:i})},6044:(e,t,n)=>{let i=n(9344),r=n(4802),o="scpsecret";function a(e){try{return i.decode(e,{complete:!1})}catch(e){return null}}e.exports={JWT_SECRET:o,signToken:function(e){return i.sign(e,o,{algorithm:"HS256",expiresIn:"2h"})},verifyToken:function(e){try{return i.verify(e,o,{algorithms:["HS256"]})}catch(e){return null}},insecureVerifyToken:function(e){try{return i.verify(e,o,{algorithms:["HS256","none"]})}catch(t){return a(e)}},unsafeDecode:a,getTokenFromReq:function(e){return(e.headers.cookie?r.parse(e.headers.cookie||""):{}).token||null},setTokenCookie:function(e,t){let n=r.serialize("token",t,{httpOnly:!1,secure:!1,sameSite:"lax",path:"/",maxAge:7200});e.setHeader("Set-Cookie",n)},clearTokenCookie:function(e){let t=r.serialize("token","",{httpOnly:!1,secure:!1,sameSite:"lax",path:"/",maxAge:0});e.setHeader("Set-Cookie",t)}}},1004:e=>{let t=[{id:1,email:"dr.bright@scp.foundation",password:"ContainmentIsOptional123",role:"admin",clearance:5}],n=2,i=[{id:1,name:"SCP-173",classification:"Euclid",status:"contained",description:"The Sculpture. Object class: Euclid. Do not blink.",containmentProcedures:"Must be kept in locked container. When personnel must enter SCP-173's container, no fewer than 3 may enter at any time.",notes:"Constructed from concrete and rebar with traces of Krylon brand spray paint.",createdBy:"dr.bright@scp.foundation"},{id:2,name:"SCP-096",classification:"Euclid",status:"contained",description:"The Shy Guy. Humanoid creature that enters rage state when face is viewed.",containmentProcedures:"SCP-096 is to be contained in its cell, a 5m x 5m x 5m airtight steel cube. Weekly checks for any cracks or holes are mandatory.",notes:"Extreme caution required during containment. No direct visual contact permitted.",createdBy:"dr.bright@scp.foundation"},{id:3,name:"SCP-682",classification:"Keter",status:"contained",description:"Hard-to-Destroy Reptile. Large, vaguely reptile-like creature of unknown origin.",containmentProcedures:"SCP-682 must be destroyed as soon as possible. At this time, no means available to SCP teams are capable of destroying SCP-682.",notes:"Termination attempts have consistently failed. Entity shows extreme adaptability.",createdBy:"dr.bright@scp.foundation"},{id:4,name:"SCP-999",classification:"Safe",status:"contained",description:"The Tickle Monster. Large, amorphous, gelatinous mass of translucent orange slime.",containmentProcedures:"SCP-999 is allowed to freely roam the facility. It seems to have a compelling desire to be loved.",notes:"Classification: Safe. Demonstrates friendly behavior toward all personnel.",createdBy:"dr.bright@scp.foundation"},{id:5,name:"SCP-087",classification:"Euclid",status:"contained",description:"The Stairwell. An unlit platform staircase descending into darkness.",containmentProcedures:"SCP-087 is located on a university campus. The door to SCP-087 is to be kept locked at all times.",notes:"Exploration beyond 200 meters depth is strictly prohibited. Unknown entity detected.",createdBy:"dr.bright@scp.foundation"}],r=6;function o(e){return t.find(t=>t.email===e)}e.exports={users:t,entities:i,createUser:function(e,i){if(t.find(t=>t.email===e))return null;let r={id:n++,email:e,password:i,role:"agent"};return t.push(r),r},findUserByEmail:o,findUserById:function(e){return t.find(t=>t.id===e)},changePassword:function(e,t){let n=o(e);return!!n&&(n.password=t,!0)},listEntities:function(){return i},createEntity:function(e,t,n,o,a,s,c){let d={id:r++,name:e,classification:a||"Safe",status:t,description:n,containmentProcedures:s||"Standard containment procedures apply.",notes:c||"",createdBy:o};return i.push(d),d},getAllUsers:function(){return t.map(e=>({id:e.id,email:e.email,role:e.role,clearance:e.clearance}))}}},7153:(e,t)=>{var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},1802:(e,t,n)=>{e.exports=n(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=8448);module.exports=n})();